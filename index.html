<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
        }
        .task-list-item.completed span {
            text-decoration: line-through;
            color: #6b7280;
        }
        .task-list-item {
            transition: background-color 0.3s ease;
        }
        .task-list-item:hover {
            background-color: #f9fafb;
        }
        .filter-btn.active {
            background-color: #3b82f6;
            color: white;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <div class="w-full max-w-2xl mx-auto bg-white rounded-2xl shadow-2xl p-6 md:p-8">
        
        <!-- Header -->
        <div class="text-center mb-6">
            <h1 class="text-4xl font-bold text-gray-800">My To-Do List</h1>
            <p id="date-time" class="text-gray-500 mt-2 text-lg"></p>
        </div>

        <!-- Add Task Form -->
        <form id="add-task-form" class="flex gap-4 mb-6">
            <input type="text" id="task-input" class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" placeholder="Add a new task..." autocomplete="off">
            <button type="submit" class="bg-blue-500 text-white font-semibold px-6 py-3 rounded-lg hover:bg-blue-600 transition-all duration-300 transform hover:scale-105 shadow-md">Add</button>
        </form>

        <!-- Filters -->
        <div id="filters" class="flex justify-center gap-4 mb-6">
            <button class="filter-btn active px-4 py-2 rounded-lg font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 transition" data-filter="all">All</button>
            <button class="filter-btn px-4 py-2 rounded-lg font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 transition" data-filter="pending">Pending</button>
            <button class="filter-btn px-4 py-2 rounded-lg font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 transition" data-filter="completed">Completed</button>
        </div>

        <!-- Task List -->
        <ul id="task-list" class="space-y-3">
            <!-- Tasks will be dynamically inserted here -->
        </ul>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const dateTimeElement = document.getElementById('date-time');
            const addTaskForm = document.getElementById('add-task-form');
            const taskInput = document.getElementById('task-input');
            const taskList = document.getElementById('task-list');
            const filterContainer = document.getElementById('filters');

            // Application State
            let tasks = []; // Array of task objects { id, text, status }
            let currentFilter = 'all';

            // --- DATE & TIME ---
            function updateDateTime() {
                const now = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                dateTimeElement.textContent = now.toLocaleDateString('en-US', options);
            }
            setInterval(updateDateTime, 1000);
            updateDateTime();

            // --- CORE FUNCTIONS ---
            function renderTasks() {
                taskList.innerHTML = ''; // Clear the list before re-rendering

                // Filter tasks based on the current filter
                const filteredTasks = tasks.filter(task => {
                    if (currentFilter === 'pending') return task.status === 'pending';
                    if (currentFilter === 'completed') return task.status === 'completed';
                    return true; // 'all'
                });
                
                if (filteredTasks.length === 0) {
                    taskList.innerHTML = <li class="text-center text-gray-500 p-4">No tasks found.</li>;
                    return;
                }

                // Use map to create HTML for each task
                filteredTasks.map(task => {
                    const li = document.createElement('li');
                    li.className = `task-list-item flex items-center p-4 rounded-lg border border-gray-200 ${
                        task.status === 'completed' ? 'completed bg-green-50' : 'bg-red-50'
                    }`;
                    li.dataset.id = task.id;

                    // Dynamic styling based on status
                    const statusColorClass = task.status === 'completed' ? 'text-green-600' : 'text-red-600';

                    li.innerHTML = `
                        <span class="flex-grow font-medium ${statusColorClass}">${task.text}</span>
                        <div class="flex items-center gap-3">
                            <button class="toggle-status p-2 hover:bg-gray-200 rounded-full">
                                <svg class="w-6 h-6 ${task.status === 'completed' ? 'text-green-500' : 'text-gray-400'}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            </button>
                            <button class="delete-task p-2 hover:bg-gray-200 rounded-full">
                                <svg class="w-6 h-6 text-gray-500 hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                            </button>
                        </div>
                    `;
                    taskList.appendChild(li);
                });
            }

            // --- EVENT HANDLERS ---
            function handleAddTask(event) {
                event.preventDefault();
                const taskText = taskInput.value.trim();

                if (taskText !== '') {
                    const newTask = {
                        id: Date.now(), // Unique ID using timestamp
                        text: taskText,
                        status: 'pending' // 'pending' or 'completed'
                    };
                    tasks.push(newTask); // Using the push array method
                    taskInput.value = '';
                    renderTasks();
                }
            }
            
            function handleTaskListClick(event) {
                const target = event.target.closest('button');
                if (!target) return;

                const parentLi = target.closest('li');
                const taskId = Number(parentLi.dataset.id);

                if (target.classList.contains('delete-task')) {
                    // Delete task
                    tasks = tasks.filter(task => task.id !== taskId);
                } else if (target.classList.contains('toggle-status')) {
                    // Toggle task status
                    const taskToToggle = tasks.find(task => task.id === taskId);
                    if (taskToToggle) {
                        taskToToggle.status = taskToToggle.status === 'pending' ? 'completed' : 'pending';
                    }
                }
                renderTasks();
            }

            function handleFilterClick(event) {
                if (event.target.tagName === 'BUTTON') {
                    currentFilter = event.target.dataset.filter;
                    // Update active button style
                    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    event.target.classList.add('active');
                    renderTasks();
                }
            }

            // --- EVENT LISTENERS ---
            addTaskForm.addEventListener('submit', handleAddTask);
            taskList.addEventListener('click', handleTaskListClick);
            filterContainer.addEventListener('click', handleFilterClick);
            
            // --- INITIAL RENDER ---
            renderTasks();
        });
    </script>
</body>
</html>

